(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{162:function(e,t,n){e.exports={"register-container":"register-container_oq71K","login-tit":"login-tit_18zzj","code-form-container":"code-form-container_3qrMm","border-empty":"border-empty_19iqI",login_icon:"login_icon_cE5sS","login_icon-key":"login_icon-key_1_jiy","send-code":"send-code_1OwWz","submit-btn":"submit-btn_25Muc","read-terms":"read-terms_2XRBC","other-wrap":"other-wrap_2ItaS","sign-in":"sign-in_1aPEZ"}},163:function(e,t,n){e.exports={"code-form-container":"code-form-container_2fW4k","login-tit":"login-tit_2LDwc","border-empty":"border-empty_1qUgp",login_icon:"login_icon_1MD5Z","send-code":"send-code_2adhS","submit-btn":"submit-btn_2RBVd","other-wrap":"other-wrap_fouzL","sign-in":"sign-in_39Pfi"}},164:function(e,t,n){e.exports={"forget-container":"forget-container_2f1hr","login-tit":"login-tit_3ghZq","code-form-container":"code-form-container_1Golz","border-empty":"border-empty_xMaOk",login_icon:"login_icon_4UAZy","login_icon-key":"login_icon-key_UyIXi","send-code":"send-code_HzZjo","submit-btn":"submit-btn_djr55","other-wrap":"other-wrap_2OYhD","sign-in":"sign-in_EcEMt"}},165:function(e,t,n){e.exports={"wechat-container":"wechat-container_2B34x","qrcode-container":"qrcode-container_3ZbuA","qrcode-wrap":"qrcode-wrap_3higq","expires-mask":"expires-mask_3bC9e","expires-desc":"expires-desc_2xNjB",tips:"tips_ZGYFm","other-wrap":"other-wrap_UfmsO"}},166:function(e,t,n){e.exports={"code-form-container":"code-form-container_Vp1N8","border-empty":"border-empty_Rq_kV",login_icon:"login_icon_12Xm6","login_icon-key":"login_icon-key_3Fv7Z","send-code":"send-code_1qrcC","submit-btn":"submit-btn_28NCe","read-terms":"read-terms_7L47M"}},167:function(e,t,n){e.exports={"code-form-container":"code-form-container_dPcIN",input_position:"input_position_2n3dw",login_icon:"login_icon_1gc_W","send-code":"send-code_m3fTb","submit-btn":"submit-btn_zbO4q","read-terms":"read-terms_2I4vJ"}},168:function(e,t,n){e.exports={"login-container":"login-container_QWbSg",close_icon:"close_icon_1fXr-","login-tit":"login-tit_X-LKM","right-top":"right-top_3Qms0",login_tip:"login_tip_1RiL5","bottom-content":"bottom-content_DJlkM","bottom-left":"bottom-left_3uSh5","bottom-btn":"bottom-btn_1uytr","tabs-wrap":"tabs-wrap_3x7Yo",tabs:"tabs_kJcDM",active:"active_3zxoI",tips:"tips_2LAzB","other-wrap":"other-wrap_21zjF","sign-in":"sign-in_33uC4"}},173:function(e,t,n){e.exports={"login-container":"login-container_1hecc","login-content":"login-content_1Lpc4",text:"text_2vn5k","form-wrap":"form-wrap_2FUUs","form-content":"form-content_oUg0i"}},182:function(e,t,n){"use strict";n.r(t);n(32),n(12);var r=n(2),o=n(0),c=n(4),l=n.n(c),d=n(23),m=n(1),f=n(8),h=o.default.extend({name:"Register",props:{formTypeChange:Function},data:function(){var e=this,t=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n,r,o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return e.$data.disabled=!0,o("请输入你的手机号"),t.abrupt("return");case 4:if(/1\d{10}/.test(r)){t.next=8;break}return e.$data.disabled=!0,o("请输入正确的手机号"),t.abrupt("return");case 8:return t.next=10,f.a.get("/api/user/checkExist/".concat(r));case 10:(c=t.sent).code===m.a.SUCCESS&&(1===c.data.isExist?(e.$data.disabled=!0,o("该手机号已注册")):(e.$data.disabled=!1,o()));case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return{isEdit:!1,FormType:d.FormType,registerForm:{phone:"",newPsd:"",code:"",read:!1},disabled:!0,loading:!1,btnText:"获取验证码",rules:{phone:[{validator:t,trigger:"change"}],newPsd:[{required:!0,message:"请输你的密码",trigger:"blur"}],code:[{required:!0,message:"请输入你的验证码",trigger:"blur"}],read:[{validator:function(e,t,n){t?n():n("请阅读并勾选服务协议")},message:"请阅读并勾选服务协议",trigger:"change"}]}}},methods:{handleFormTypeChange:function(e){this.$props.formTypeChange(e)},handleSendCode:function(){var e=this;this.$refs.registerForm.validateField("phone",function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){var r,o,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=3;break}return e.$message({message:n,type:"error"}),t.abrupt("return");case 3:return e.$data.loading=!0,r=e.registerForm.phone,t.next=7,f.a.get("/api/auth/check/".concat(r));case 7:o=t.sent,e.$data.loading=!1,o.code===m.a.SUCCESS&&(s=60,e.disabled=!0,c=setInterval((function(){s>0?(e.btnText="".concat(s,"秒后获取"),s--):0===s&&(e.btnText="获取验证码",e.disabled=!1,clearInterval(c))}),1e3));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleSubmit:function(){var e=this;this.$refs.registerForm.validate(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n,r){var o,c,h,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=6;break}return o=l.a.get(r,"phone[0].message",""),c=l.a.get(r,"newPsd[0].message",""),h=l.a.get(r,"code[0].message",""),e.$message({message:o||c||h||"参数不合法",type:"error"}),t.abrupt("return");case 6:return y={phone:e.registerForm.phone,newPsd:e.registerForm.newPsd,code:e.registerForm.code},t.next=9,f.a.post("/api/auth/forget",y);case 9:t.sent.code===m.a.SUCCESS&&e.$props.formTypeChange(d.FormType.login);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}}}),y=n(272),v=n(5);var component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["register-container"]},[n("p",{class:e.$style["login-tit"]},[e._v("账号注册")]),e._v(" "),n("el-form",{ref:"registerForm",class:e.$style["code-form-container"],attrs:{model:e.registerForm,rules:e.rules}},[n("el-form-item",{attrs:{prop:"phone"}},[n("el-input",{staticClass:"_fun-hide",attrs:{placeholder:"输入手机号",readonly:!e.isEdit},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.registerForm.phone,callback:function(t){e.$set(e.registerForm,"phone",t)},expression:"registerForm.phone"}}),e._v(" "),n("i",{staticClass:"el-icon-loginUser",class:e.$style.login_icon})],1),e._v(" "),n("el-form-item",{attrs:{prop:"newPsd"}},[n("el-input",{attrs:{type:"password",placeholder:"输入登录密码",readonly:!e.isEdit},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.registerForm.newPsd,callback:function(t){e.$set(e.registerForm,"newPsd",t)},expression:"registerForm.newPsd"}}),e._v(" "),n("i",{staticClass:"el-icon-loginPwd",class:e.$style.login_icon})],1),e._v(" "),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{class:e.$style["border-empty"],attrs:{type:"text",placeholder:"输入验证码",readonly:!e.isEdit},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code",t)},expression:"registerForm.code"}}),e._v(" "),n("i",{staticClass:"el-icon-key",class:e.$style["login_icon-key"]}),e._v(" "),n("el-button",{class:e.$style["send-code"],attrs:{type:"text",disabled:e.disabled,loading:e.loading},on:{click:e.handleSendCode}},[e._v("\n        "+e._s(e.btnText)+"\n      ")])],1),e._v(" "),n("el-form-item",[n("el-button",{class:e.$style["submit-btn"],attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n        注 册\n      ")])],1),e._v(" "),n("el-form-item",{class:e.$style["read-terms"],attrs:{prop:"read"}},[n("el-checkbox",{model:{value:e.registerForm.read,callback:function(t){e.$set(e.registerForm,"read",t)},expression:"registerForm.read"}},[e._v("\n        我已阅读并同意\n        "),n("a",{attrs:{href:"/terms/",target:"_blank",rel:"nofollow"}},[e._v("\n          第三方商品平台交易服务协议\n        ")])])],1)],1),e._v(" "),n("div",{class:e.$style["other-wrap"]},[n("span",{on:{click:function(t){return e.handleFormTypeChange(e.FormType.forget)}}},[e._v("忘记密码")]),e._v(" "),n("span",{class:e.$style["sign-in"],on:{click:function(t){return e.handleFormTypeChange(e.FormType.login)}}},[e._v("\n      登录\n    ")])])],1)}),[],!1,(function(e){this.$style=y.default.locals||y.default}),null,null);t.default=component.exports},183:function(e,t,n){"use strict";n.r(t);n(32);var r=n(13),o=(n(12),n(2)),c=n(0),l=n(4),d=n.n(l),m=n(8),f=n(23),h=n(1);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _=c.default.extend({name:"Bind",props:{formTypeChange:Function},data:function(){var e=this,t=function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n,r,o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return e.$data.disabled=!0,o("请输入你的手机号"),t.abrupt("return");case 4:if(/1\d{10}/.test(r)){t.next=8;break}return e.$data.disabled=!0,o("请输入正确的手机号"),t.abrupt("return");case 8:return t.next=10,m.a.get("/api/user/checkExist/".concat(r));case 10:(c=t.sent).code===h.a.SUCCESS&&1===c.data.isBind?(e.$data.disabled=!0,o("该手机号已绑定")):e.$data.disabled=!1,o("");case 13:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return{isEdit:!1,btnText:"获取验证码",disabled:!1,loading:!1,FormType:f.FormType,bindForm:{phoneNum:"",code:""},rules:{phoneNum:[{validator:t,trigger:"change"}],code:[{required:!0,message:"请输入你的验证码",trigger:"blur"}]}}},methods:{handleFormTypeChange:function(e){this.$props.formTypeChange(e)},handleSendCode:function(){var e=this;this.$refs.bindForm.validateField("phoneNum",function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){var r,o,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),!n){t.next=4;break}return e.$message({message:n,type:"error"}),t.abrupt("return");case 4:return e.$data.loading=!0,r=e.bindForm.phoneNum,t.next=8,m.a.get("/api/auth/check/".concat(r));case 8:o=t.sent,e.$data.loading=!1,o.code===h.a.SUCCESS&&(s=60,e.disabled=!0,c=setInterval((function(){s>0?(e.btnText="".concat(s,"秒后获取"),s--):0===s&&(e.btnText="获取验证码",e.disabled=!1,clearInterval(c))}),1e3));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleSubmit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,f,y,_,$,x,w,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.b.get("openId"),r=m.c.state.user,o=r.origins,c=void 0===o?0:o,l=r.action,f=void 0===l?0:l,y=r.industryId,_=void 0===y?0:y,t.next=4,Object(m.a)({url:"/api/auth/bind",method:"POST",data:v(v({},e.bindForm),{},{openId:n}),headers:{origins:c,action:f,industryId:_}});case 4:if(($=t.sent).code!==h.a.SUCCESS){t.next=22;break}return x=d.a.get($,"data.jwtToken.access_token",""),w=e.bindForm.phoneNum,m.b.set("phoneNumber",w,{maxAge:604800,path:"/"}),m.b.set("access_token",x,{maxAge:604800,path:"/"}),k=d.a.get(e,"$route.query.redirect",""),t.next=13,m.c.commit("user/setOrigins","");case 13:return t.next=15,m.c.commit("user/setIndustryId",0);case 15:return t.next=17,m.c.commit("user/setAction",0);case 17:return t.next=19,m.c.commit("global/setIsLogin",!0);case 19:return t.next=21,m.c.dispatch("global/getUser");case 21:k?window.location.href=k:e.$login.hide();case 22:case"end":return t.stop()}}),t)})))()}}}),$=n(273),x=n(5);var component=Object(x.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{class:e.$style["login-tit"]},[e._v("绑定账号")]),e._v(" "),n("el-form",{ref:"bindForm",class:e.$style["code-form-container"],attrs:{model:e.bindForm,rules:e.rules}},[n("el-form-item",{staticClass:"_fun-hide",attrs:{prop:"phoneNum"}},[n("el-input",{attrs:{placeholder:"输入手机号",readonly:!e.isEdit},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.bindForm.phoneNum,callback:function(t){e.$set(e.bindForm,"phoneNum",t)},expression:"bindForm.phoneNum"}}),e._v(" "),n("i",{staticClass:"el-icon-loginUser",class:e.$style.login_icon})],1),e._v(" "),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{class:e.$style["border-empty"],attrs:{type:"text",placeholder:"输入验证码",readonly:!e.isEdit},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.bindForm.code,callback:function(t){e.$set(e.bindForm,"code",t)},expression:"bindForm.code"}}),e._v(" "),n("i",{staticClass:"el-icon-loginPwd",class:e.$style.login_icon}),e._v(" "),n("el-button",{class:e.$style["send-code"],attrs:{type:"text",disabled:e.disabled,loading:e.loading},on:{click:e.handleSendCode}},[e._v("\n        "+e._s(e.btnText)+"\n      ")])],1),e._v(" "),n("el-form-item",[n("el-button",{class:e.$style["submit-btn"],attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n        绑定登录\n      ")])],1)],1),e._v(" "),n("div",{class:e.$style["other-wrap"]},[n("span",{on:{click:function(t){return e.handleFormTypeChange(e.FormType.login)}}},[e._v("登录")]),e._v(" "),n("span",{class:e.$style["sign-in"],on:{click:function(t){return e.handleFormTypeChange(e.FormType.register)}}},[e._v("\n      立即注册\n    ")])])],1)}),[],!1,(function(e){this.$style=$.default.locals||$.default}),null,null);t.default=component.exports},184:function(e,t,n){"use strict";n.r(t);n(32);var r=n(13),o=(n(12),n(2)),c=n(0),l=n(4),d=n.n(l),m=n(23),f=n(1),h=n(8);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _=c.default.extend({name:"Forget",props:{formTypeChange:Function},data:function(){var e=this,t=function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n,r,o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return e.$data.disabled=!0,o("请输入你的手机号"),t.abrupt("return");case 4:if(/1\d{10}/.test(r)){t.next=8;break}return e.$data.disabled=!0,o("请输入正确的手机号"),t.abrupt("return");case 8:return t.next=10,h.a.get("/api/user/checkExist/".concat(r));case 10:(c=t.sent).code===f.a.SUCCESS&&(0===c.data.isExist?(e.$data.disabled=!0,o("该手机号未注册")):e.$data.disabled=!1);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return{FormType:m.FormType,isEdit:!1,loginForm:{phone:"",newPsd:"",code:""},disabled:!0,loading:!1,btnText:"获取验证码",rules:{phone:[{validator:t,trigger:"change"}],newPsd:[{required:!0,message:"请输入你的新密码",trigger:"blur"}],code:[{required:!0,message:"请输入你的验证码",trigger:"blur"}]}}},methods:{handleFormTypeChange:function(e){this.$props.formTypeChange(e)},handleSendCode:function(){var e=this;this.$refs.loginForm.validateField("phone",function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){var r,o,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=3;break}return e.$message({message:n,type:"error"}),t.abrupt("return");case 3:return e.$data.loading=!0,r=e.loginForm.phone,t.next=7,h.a.get("/api/auth/check/".concat(r));case 7:o=t.sent,e.$data.loading=!1,o.code===f.a.SUCCESS&&(s=60,e.disabled=!0,c=setInterval((function(){s>0?(e.btnText="".concat(s,"秒后获取"),s--):0===s&&(e.btnText="获取验证码",e.disabled=!1,clearInterval(c))}),1e3));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleSubmit:function(){var e=this;this.$refs.loginForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n,r){var o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=6;break}return o=d.a.get(r,"phone[0].message",""),c=d.a.get(r,"newPsd[0].message",""),l=d.a.get(r,"code[0].message",""),e.$message({message:o||c||l||"参数不合法",type:"error"}),t.abrupt("return");case 6:return t.next=8,h.a.post("/api/auth/forget",v({},e.loginForm));case 8:t.sent.code===f.a.SUCCESS&&e.handleFormTypeChange(m.FormType.login);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}}}),$=n(274),x=n(5);var component=Object(x.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["forget-container"]},[n("p",{class:e.$style["login-tit"]},[e._v("忘记密码")]),e._v(" "),n("el-form",{ref:"loginForm",class:e.$style["code-form-container"],attrs:{model:e.loginForm,rules:e.rules}},[n("el-form-item",{staticClass:"_fun-hide",attrs:{prop:"phone"}},[n("el-input",{attrs:{readonly:!e.isEdit,placeholder:"输入手机号"},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}}),e._v(" "),n("i",{staticClass:"el-icon-loginUser",class:e.$style.login_icon})],1),e._v(" "),n("el-form-item",{attrs:{prop:"newPsd"}},[n("el-input",{attrs:{readonly:!e.isEdit,type:"password",placeholder:"输入新登录密码"},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.loginForm.newPsd,callback:function(t){e.$set(e.loginForm,"newPsd",t)},expression:"loginForm.newPsd"}}),e._v(" "),n("i",{staticClass:"el-icon-loginPwd",class:e.$style.login_icon})],1),e._v(" "),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{class:e.$style["border-empty"],attrs:{type:"text",readonly:!e.isEdit,placeholder:"输入验证码"},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}}),e._v(" "),n("i",{staticClass:"el-icon-key",class:e.$style["login_icon-key"]}),e._v(" "),n("el-button",{class:e.$style["send-code"],attrs:{type:"text",disabled:e.disabled},on:{click:e.handleSendCode}},[e._v("\n        "+e._s(e.btnText)+"\n      ")])],1),e._v(" "),n("el-form-item",[n("el-button",{class:e.$style["submit-btn"],attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n        重置密码\n      ")])],1)],1),e._v(" "),n("div",{class:e.$style["other-wrap"]},[n("span",{on:{click:function(t){return e.handleFormTypeChange(e.FormType.register)}}},[e._v("立即注册")]),e._v(" "),n("span",{class:e.$style["sign-in"],on:{click:function(t){return e.handleFormTypeChange(e.FormType.login)}}},[e._v("\n      登录\n    ")])])],1)}),[],!1,(function(e){this.$style=$.default.locals||$.default}),null,null);t.default=component.exports},185:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(23),c=n(614),code=n(615),l=n(616),d=n(76),m=r.default.extend({components:{"ju-wechat":c.default,"ju-code":code.default,"ju-password":l.default},props:{formTypeChange:Function,source:String},data:function(){return{Tabs:o.Tabs,FormType:o.FormType,tabs:[{label:"扫码登录",value:o.Tabs.wechat},{label:"验证码登录",value:o.Tabs.code},{label:"密码登录",value:o.Tabs.pwd}],tabType:o.Tabs.wechat}},created:function(){var e=this;d.default.$on("getTabType",(function(){d.default.$emit("sendTabType",e.tabType)}))},methods:{handleTabChange:function(e){this.$data.tabType=e},handleFormTypeChange:function(e){this.$props.formTypeChange(e)}}}),f=n(278),h=n(5);var component=Object(h.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["login-container"]},[e.tabType===e.Tabs.wechat?n("div",{class:e.$style["login-tit"]},[e._v("\n    微信扫码登录或注册\n  ")]):e.tabType===e.Tabs.code?n("div",{class:e.$style["login-tit"]},[e._v("\n    手机验证码登录\n  ")]):e.tabType===e.Tabs.pwd?n("div",{class:e.$style["login-tit"]},[e._v("\n    账号密码登录\n  ")]):e._e(),e._v(" "),n("div",{class:e.$style["right-top"]},[e.tabType===e.Tabs.wechat||e.tabType===e.Tabs.pwd?n("p",[n("span",{class:e.$style.login_tip},[e._v("账号登录在这里")]),e._v(" "),n("i",{staticClass:"el-icon-acc",on:{click:function(t){return e.handleTabChange(e.Tabs.code)}}})]):n("p",[n("span",{class:e.$style.login_tip},[e._v("扫码登录在这里")]),e._v(" "),n("i",{staticClass:"el-icon-code",on:{click:function(t){return e.handleTabChange(e.Tabs.wechat)}}})])]),e._v(" "),e.tabType===e.Tabs.wechat?n("ju-wechat",{attrs:{"form-type-change":e.handleFormTypeChange}}):e.tabType===e.Tabs.code?n("ju-code"):e.tabType===e.Tabs.pwd?n("ju-password"):e._e(),e._v(" "),e.tabType!==e.Tabs.wechat?n("div",{class:e.$style["bottom-content"]},[e.tabType!==e.Tabs.code?n("div",{class:e.$style["bottom-left"],on:{click:function(t){return e.handleTabChange(e.Tabs.code)}}},[e._v("\n      手机验证码登录\n    ")]):e._e(),e._v(" "),e.tabType!==e.Tabs.pwd?n("div",{class:e.$style["bottom-left"],on:{click:function(t){return e.handleTabChange(e.Tabs.pwd)}}},[e._v("\n      账号密码登录\n    ")]):e._e(),e._v(" "),n("div",{class:e.$style["bottom-btn"]},[n("span",{on:{click:function(t){return e.handleFormTypeChange(e.FormType.forget)}}},[e._v("忘记密码")]),e._v(" "),n("span",{on:{click:function(t){return e.handleFormTypeChange(e.FormType.register)}}},[e._v("立即注册")])])]):e._e()],1)}),[],!1,(function(e){this.$style=f.default.locals||f.default}),null,null);t.default=component.exports},272:function(e,t,n){"use strict";var r=n(162),o=n.n(r);n.d(t,"default",(function(){return o.a}))},273:function(e,t,n){"use strict";var r=n(163),o=n.n(r);n.d(t,"default",(function(){return o.a}))},274:function(e,t,n){"use strict";var r=n(164),o=n.n(r);n.d(t,"default",(function(){return o.a}))},275:function(e,t,n){"use strict";var r=n(165),o=n.n(r);n.d(t,"default",(function(){return o.a}))},276:function(e,t,n){"use strict";var r=n(166),o=n.n(r);n.d(t,"default",(function(){return o.a}))},277:function(e,t,n){"use strict";var r=n(167),o=n.n(r);n.d(t,"default",(function(){return o.a}))},278:function(e,t,n){"use strict";var r=n(168),o=n.n(r);n.d(t,"default",(function(){return o.a}))},285:function(e,t,n){"use strict";var r=n(173),o=n.n(r);n.d(t,"default",(function(){return o.a}))},614:function(e,t,n){"use strict";n.r(t);n(32),n(12);var r,o=n(2),c=n(0),l=n(4),d=n.n(l),m=n(23),f=n(76),h=n(8),y=n(1),v=c.default.extend({props:{formTypeChange:Function},data:function(){return{wechat:{},time:60}},created:function(){var e=this;d.a.get(this,"$parent.$parent.$parent.dialogVisible",!1)&&this.handleGetWxQRCode(),f.default.$on("fetchWxQRCode",(function(){e.handleGetWxQRCode()}))},beforeDestroy:function(){r&&(this.time=0,clearTimeout(r))},methods:{handleWxLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.wechat.ticket)&&d.a.get(e,"$parent.$parent.$parent.dialogVisible",!1)){t.next=4;break}return console.log("ticket is undefined"),t.abrupt("return");case 4:return t.next=6,h.a.get("/api/auth/wxlogin/".concat(n));case 6:if((o=t.sent).code!==y.a.NO_CODE_SCANNING){t.next=11;break}e.time>0&&(r=setTimeout((function(){e.handleWxLogin(),clearTimeout(r),e.time--}),1e3)),t.next=34;break;case 11:if(o.code!==y.a.UNREGISTERED||!o.data.openId){t.next=17;break}clearTimeout(r),e.$props.formTypeChange(m.FormType.bind),h.b.set("openId",o.data.openId,{expires:new Date(Date.now()+72e5)}),t.next=34;break;case 17:if(o.code!==y.a.SUCCESS){t.next=34;break}return clearTimeout(r),c=d.a.get(o,"data.jwtToken.access_token",""),h.b.set("access_token",c,{maxAge:604800,path:"/"}),t.next=23,h.c.commit("user/setOrigins","");case 23:return t.next=25,h.c.commit("user/setIndustryId",0);case 25:return t.next=27,h.c.commit("user/setAction",0);case 27:return t.next=29,h.c.commit("global/setIsLogin",!0);case 29:return t.next=31,h.c.dispatch("global/getUser");case 31:if(l=d.a.get(e,"$route.query.redirect",""),e.$login.hide(),h.c.state.global.user.isPererffect)l&&e.$router.push(l);else try{e.$parent.$parent.showInfo()}catch(t){e.$parent.$parent.$parent.showInfo()}case 34:case"end":return t.stop()}}),t)})))()},handleGetWxQRCode:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.time=60,t.next=3,h.a.get("/api/auth/getWxQRScanCode");case 3:(n=t.sent).code===y.a.SUCCESS&&(e.$data.wechat=n.data,e.handleWxLogin());case 5:case"end":return t.stop()}}),t)})))()}}}),_=n(275),$=n(5);var component=Object($.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["wechat-container"]},[n("div",{class:e.$style["qrcode-container"]},[n("div",{class:e.$style["qrcode-wrap"]},[e.wechat.ticket?n("img",{attrs:{src:"https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket="+e.wechat.ticket,alt:"qrcode"}}):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0===e.time,expression:"time === 0"}],class:e.$style["expires-mask"]},[n("i",{staticClass:"el-icon-refresh-right",on:{click:e.handleGetWxQRCode}}),e._v(" "),n("div",{class:e.$style["expires-desc"]},[e._v("已失效,点击刷新")])])]),e._v(" "),n("div",{class:e.$style.tips,staticStyle:{"margin-top":"24px"}},[e._v("\n      扫码关注\n      "),n("span",[e._v("“聚展网”")]),e._v("\n      即可登录注册\n    ")]),e._v(" "),n("div",{class:e.$style.tips},[e._v("首次扫码将自动注册新账号")])])])}),[],!1,(function(e){this.$style=_.default.locals||_.default}),"c74036ae",null);t.default=component.exports},615:function(e,t,n){"use strict";n.r(t);n(21),n(32),n(12);var r=n(2),o=n(0),c=n(4),l=n.n(c),d=n(8),m=n(1),f=o.default.extend({data:function(){var e=this;return{isEdit:!1,btnText:"获取验证码",disabled:!0,loading:!1,loginForm:{phoneNumber:"",code:"",read:!1},rules:{phoneNumber:[{validator:function(t,n,r){return n?/1\d{10}/.test(n)?(r(),void(e.$data.disabled=!1)):(e.$data.disabled=!0,void r("请输入正确的手机号")):(e.$data.disabled=!0,void r("请输入你的手机号"))},trigger:"change"}],code:[{required:!0,message:"请输入你的验证码",trigger:"blur"}],read:[{validator:function(e,t,n){t?n():n("请阅读并勾选服务协议")},message:"请阅读并勾选服务协议",trigger:"change"}]}}},methods:{handleSendCode:function(){var e=this;this.$refs.loginForm.validateField("phoneNumber",function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){var r,o,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=3;break}return e.$message({message:n,type:"error"}),t.abrupt("return");case 3:return e.$data.loading=!0,r=e.loginForm.phoneNumber,t.next=7,d.a.get("/api/auth/check/".concat(r));case 7:o=t.sent,e.$data.loading=!1,o.code===m.a.SUCCESS&&(s=60,e.disabled=!0,c=setInterval((function(){s>0?(e.btnText="".concat(s,"秒后获取"),s--):0===s&&(e.btnText="获取验证码",e.disabled=!1,clearInterval(c))}),1e3));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n,r){var o,c,f,h,code,y,v,_,$,x,w,k,T,F,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=l.a.get(r,"phoneNumber[0].message",""),n){t.next=5;break}return c=l.a.get(r,"code[0].message",""),e.$message({message:o||c||"参数不合法",type:"error"}),t.abrupt("return");case 5:return f=e.loginForm,h=f.phoneNumber,code=f.code,y=d.c.state.user,v=y.origins,_=void 0===v?0:v,$=y.action,x=void 0===$?0:$,w=y.industryId,k=void 0===w?0:w,t.next=9,Object(d.a)({url:"/api/auth/phonelr/".concat(h,"/").concat(code),method:"GET",headers:{origins:_,action:x,industryId:k}});case 9:if((T=t.sent).code!==m.a.SUCCESS){t.next=27;break}return F=l.a.get(T,"data.jwtToken.access_token",""),d.b.set("phoneNumber",h,{maxAge:604800,path:"/"}),d.b.set("access_token",F,{maxAge:604800,path:"/"}),C=l.a.get(e,"$route.query.redirect",""),t.next=17,d.c.commit("user/setOrigins","");case 17:return t.next=19,d.c.commit("user/setIndustryId",0);case 19:return t.next=21,d.c.commit("user/setAction",0);case 21:return t.next=23,d.c.commit("global/setIsLogin",!0);case 23:return t.next=25,d.c.dispatch("global/getUser");case 25:if(e.$login.hide(),d.c.state.global.user.isPererffect)C&&e.$router.push(C);else try{e.$parent.$parent.showInfo()}catch(t){e.$parent.$parent.$parent.showInfo()}case 27:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}}}),h=n(276),y=n(5);var component=Object(y.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"loginForm",class:e.$style["code-form-container"],attrs:{model:e.loginForm,rules:e.rules}},[n("el-form-item",{attrs:{prop:"phoneNumber"}},[n("el-input",{staticClass:"_fun-hide",class:e.$style.input_position,attrs:{readonly:!e.isEdit,placeholder:"输入常用手机号"},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.loginForm.phoneNumber,callback:function(t){e.$set(e.loginForm,"phoneNumber",t)},expression:"loginForm.phoneNumber"}}),e._v(" "),n("i",{staticClass:"el-icon-loginUser",class:e.$style.login_icon})],1),e._v(" "),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{class:e.$style["border-empty"],attrs:{type:"text",readonly:!e.isEdit,placeholder:"输入登录密码"},nativeOn:{click:function(t){e.isEdit=!0}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}}),e._v(" "),n("i",{staticClass:"el-icon-key",class:e.$style["login_icon-key"]}),e._v(" "),n("el-button",{class:e.$style["send-code"],attrs:{type:"text",loading:e.loading,disabled:e.disabled},on:{click:e.handleSendCode}},[e._v("\n      "+e._s(e.btnText)+"\n    ")])],1),e._v(" "),n("el-form-item",[n("el-button",{class:e.$style["submit-btn"],attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v("\n      登 录 / 注 册\n    ")])],1),e._v(" "),n("el-form-item",{class:e.$style["read-terms"],attrs:{prop:"read"}},[n("el-checkbox",{model:{value:e.loginForm.read,callback:function(t){e.$set(e.loginForm,"read",t)},expression:"loginForm.read"}},[e._v("\n      我已阅读并同意\n      "),n("a",{attrs:{href:"/terms/",target:"_blank",rel:"nofollow"}},[e._v("\n        第三方商品平台交易服务协议\n      ")])])],1)],1)}),[],!1,(function(e){this.$style=h.default.locals||h.default}),null,null);t.default=component.exports},616:function(e,t,n){"use strict";n.r(t);var r=n(13),o=(n(12),n(2)),c=n(0),l=n(4),d=n.n(l),m=n(8),f=n(1);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v=c.default.extend({data:function(){var e=this;return{isEdit:!1,loginForm:{userName:"",password:"",read:!1},rules:{userName:[{validator:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n,r,o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return e.$data.disabled=!0,o("请输入你的手机号"),t.abrupt("return");case 4:if(/1\d{10}/.test(r)){t.next=8;break}return e.$data.disabled=!0,o("请输入正确的手机号"),t.abrupt("return");case 8:return t.next=10,m.a.get("/api/user/checkExist/".concat(r));case 10:(c=t.sent).code===f.a.SUCCESS&&(0===c.data.isExist?(e.$data.disabled=!0,o("该手机号未注册")):e.$data.disabled=!1);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),trigger:"change"}],password:[{required:!0,message:"请输入你的密码",trigger:"blur"}],read:[{validator:function(e,t,n){t?n():n("请阅读并勾选服务协议")},message:"请阅读并勾选服务协议",trigger:"change"}]}}},methods:{handleLogin:function(){var e=this;this.$refs.passwordForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n,r){var o,c,l,h,v,_,$,x,w,k,T,F,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=5;break}return o=d.a.get(r,"userName[0].message",""),c=d.a.get(r,"password[0].message",""),e.$message({message:o||c||"参数不合法",type:"error"}),t.abrupt("return");case 5:return l=e.loginForm.userName,h=m.c.state.user,v=h.origins,_=void 0===v?"":v,$=h.action,x=void 0===$?"":$,w=h.industryId,k=void 0===w?"":w,console.log(_,x,k),t.next=10,Object(m.a)({url:"/api/auth/login",method:"POST",data:y(y({},e.loginForm),{},{type:"pc"}),headers:{origins:_,action:x,industryId:k}});case 10:if((T=t.sent).code!==f.a.SUCCESS){t.next=29;break}return F=d.a.get(T,"data.jwtToken.access_token",""),console.log(m.b),m.b.set("phoneNumber",l,{maxAge:604800,path:"/"}),m.b.set("access_token",F,{maxAge:604800,path:"/"}),C=d.a.get(e,"$route.query.redirect",""),t.next=19,m.c.commit("user/setOrigins","");case 19:return t.next=21,m.c.commit("user/setIndustryId",0);case 21:return t.next=23,m.c.commit("user/setAction",0);case 23:return t.next=25,m.c.commit("global/setIsLogin",!0);case 25:return t.next=27,m.c.dispatch("global/getUser");case 27:if(e.$login.hide(),m.c.state.global.user.isPererffect)C&&e.$router.push(C);else try{e.$parent.$parent.showInfo()}catch(t){e.$parent.$parent.$parent.showInfo()}case 29:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},inputControl:function(){this.isEdit=!0}}}),_=n(277),$=n(5);var component=Object($.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"passwordForm",class:e.$style["code-form-container"],attrs:{model:e.loginForm,rules:e.rules}},[n("el-form-item",{attrs:{prop:"userName"}},[n("el-input",{staticClass:"_fun-hide",class:e.$style.input_position,attrs:{readonly:!e.isEdit,placeholder:"输入常用手机号"},nativeOn:{click:function(t){return e.inputControl(t)}},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}}),e._v(" "),n("i",{staticClass:"el-icon-loginUser",class:e.$style.login_icon})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{readonly:!e.isEdit,type:"password",placeholder:"输入验证码"},nativeOn:{click:function(t){return e.inputControl(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),n("i",{staticClass:"el-icon-loginPwd",class:e.$style.login_icon})],1),e._v(" "),n("el-form-item",[n("el-button",{class:e.$style["submit-btn"],attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v("\n      登 录\n    ")])],1),e._v(" "),n("el-form-item",{class:e.$style["read-terms"],attrs:{prop:"read"}},[n("el-checkbox",{model:{value:e.loginForm.read,callback:function(t){e.$set(e.loginForm,"read",t)},expression:"loginForm.read"}},[e._v("\n      我已阅读并同意\n      "),n("a",{attrs:{href:"/terms/",target:"_blank",rel:"nofollow"}},[e._v("\n        第三方商品平台交易服务协议\n      ")])])],1)],1)}),[],!1,(function(e){this.$style=_.default.locals||_.default}),null,null);t.default=component.exports},954:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(23),c=n(182),l=n(183),d=n(184),m=n(185),f=n(76),h=r.default.extend({layout:"loginLayout",components:{"ju-login":m.default,"ju-forget":d.default,"ju-register":c.default,"ju-bind":l.default},data:function(){return{FormType:o.FormType,formType:o.FormType.login}},watch:{formType:{handler:function(e){e===o.FormType.login&&this.$nextTick((function(){f.default.$emit("getTabType")}))},immediate:!0}},created:function(){f.default.$on("sendTabType",(function(e){e===o.Tabs.wechat&&f.default.$emit("fetchWxQRCode")}))},methods:{handleFormTypeChange:function(e){this.$data.formType=e},showInfo:function(){this.$completeInfo.show()}},head:function(){return{title:"登录-聚展",meta:[{name:"keywords",content:""},{name:"description",content:""},{name:"robots",content:"noindex, nofollow"}]}}}),y=n(285),v=n(5);var component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["login-container"]},[n("div",{class:e.$style["login-content"]},[n("div",{class:e.$style.text},[e._v("全球展会展位预定、门票预订")]),e._v(" "),n("div",{class:e.$style["form-wrap"]},[n("div",{class:e.$style["form-content"]},[e.formType===e.FormType.login?n("ju-login",{attrs:{source:"page","form-type-change":e.handleFormTypeChange}}):e.formType===e.FormType.forget?n("ju-forget",{attrs:{"form-type-change":e.handleFormTypeChange}}):e.formType===e.FormType.register?n("ju-register",{attrs:{"form-type-change":e.handleFormTypeChange}}):e.formType===e.FormType.bind?n("ju-bind",{attrs:{"form-type-change":e.handleFormTypeChange}}):e._e()],1)])])])}),[],!1,(function(e){this.$style=y.default.locals||y.default}),null,null);t.default=component.exports}}]);
//# sourceMappingURL=a47e0a0.js.map